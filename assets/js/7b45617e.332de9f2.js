"use strict";(self.webpackChunkignite_cookbook=self.webpackChunkignite_cookbook||[]).push([[8436],{9368:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var o=n(7624),s=n(2172);const r={title:"Generator for Component Tests",description:"Customize `npx ignite-cli generate component` to add test files for each component generated",tags:["Generator"],last_update:{author:"Joshua Yoes"},publish_date:new Date("2022-10-10T00:00:00.000Z")},i="Add component tests to npx ignite-cli generate component",a={id:"recipes/GeneratorComponentTests",title:"Generator for Component Tests",description:"Customize `npx ignite-cli generate component` to add test files for each component generated",source:"@site/docs/recipes/GeneratorComponentTests.md",sourceDirName:"recipes",slug:"/recipes/GeneratorComponentTests",permalink:"/docs/recipes/GeneratorComponentTests",draft:!1,unlisted:!1,tags:[{label:"Generator",permalink:"/docs/tags/generator"}],version:"current",lastUpdatedBy:"Joshua Yoes",lastUpdatedAt:1681985935,formattedLastUpdatedAt:"Apr 20, 2023",frontMatter:{title:"Generator for Component Tests",description:"Customize `npx ignite-cli generate component` to add test files for each component generated",tags:["Generator"],last_update:{author:"Joshua Yoes"},publish_date:"2022-10-10T00:00:00.000Z"},sidebar:"mainSidebar",previous:{title:"Expo Router",permalink:"/docs/recipes/ExpoRouter"},next:{title:"PowerSync and Supabase for Local-First Data Management",permalink:"/docs/recipes/LocalFirstDataWithPowerSync"}},c={},l=[{value:"Setup <code>@testing-library/react-native</code>",id:"setup-testing-libraryreact-native",level:2},{value:"Component Generators",id:"component-generators",level:2},{value:"Customizing Component Generators",id:"customizing-component-generators",level:2},{value:"Testing",id:"testing",level:2}];function p(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.h1,{id:"add-component-tests-to-npx-ignite-cli-generate-component",children:["Add component tests to ",(0,o.jsx)(t.code,{children:"npx ignite-cli generate component"})]}),"\n",(0,o.jsx)(t.p,{children:"Did you know that Ignite automatically generates files for you? And that you can customize those generators?"}),"\n",(0,o.jsxs)(t.p,{children:["Here is how to automatically generate components and tests for them using ",(0,o.jsx)(t.code,{children:"@testing-library/react-native"})]}),"\n",(0,o.jsxs)(t.h2,{id:"setup-testing-libraryreact-native",children:["Setup ",(0,o.jsx)(t.code,{children:"@testing-library/react-native"})]}),"\n",(0,o.jsxs)(t.p,{children:["First, we will want to add ",(0,o.jsx)(t.code,{children:"@testing-library/react-native"})," to our Ignite project. ",(0,o.jsx)(t.a,{href:"https://reactnativetesting.io/component/setup",children:"Josh Justice has an excellent setup guide to follow along at reactnativetesting.io"})]}),"\n",(0,o.jsx)(t.h2,{id:"component-generators",children:"Component Generators"}),"\n",(0,o.jsxs)(t.p,{children:["There are a variety of generators, but today we are going to focus on ",(0,o.jsx)(t.code,{children:"npx ignite-cli generate component"})]}),"\n",(0,o.jsxs)(t.p,{children:["Ignite will look in the ",(0,o.jsx)(t.code,{children:"ignite/templates/*"})," directory for what templates to run on each command."]}),"\n",(0,o.jsxs)(t.p,{children:["By default, Ignite provides a ",(0,o.jsx)(t.code,{children:"ignite/templates/component/NAME.tsx.ejs"})," template for creating a component file."]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["We use ejs and frontmatter to write our templates, you can read more about syntax ",(0,o.jsx)(t.a,{href:"https://github.com/infinitered/ignite/blob/master/docs/Generator-Templates.md",children:"in the Ignite docs"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"NAME"})," in ",(0,o.jsx)(t.code,{children:"ignite/templates/component/NAME.tsx.ejs"})," is replaced with the first argument passed to our generator. So ",(0,o.jsx)(t.code,{children:"npx ignite-cli generate component Profile"})," would create ",(0,o.jsx)(t.code,{children:"app/components/Profile.tsx"})]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"customizing-component-generators",children:"Customizing Component Generators"}),"\n",(0,o.jsxs)(t.p,{children:["Add the following file to ",(0,o.jsx)(t.code,{children:"ignite/templates/component/NAME.spec.tsx.ejs"})]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ejs",children:'---\ndestinationDir: app/components/specs\n---\n// https://reactnativetesting.io/component/testing/\n\nimport React from "react"\nimport { fireEvent, render, screen } from "@testing-library/react-native"\nimport { <%= props.pascalCaseName %> } from "../<%= props.pascalCaseName %>"\n\ndescribe("<%= props.pascalCaseName %>", () => {\n  it("renders", () => {\n    render(<<%= props.pascalCaseName %> />)\n    expect(screen.getByText("Hello")).toBeTruthy()\n  })\n})\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Now, when we run ",(0,o.jsx)(t.code,{children:"npx ignite-cli generate component Profile"}),", it will create both ",(0,o.jsx)(t.code,{children:"app/components/Profile.tsx"})," ",(0,o.jsx)(t.em,{children:"and"})," ",(0,o.jsx)(t.code,{children:"app/components/specs/Profile.spec.tsx"})]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"ignite/templates/component/NAME.spec.tsx.ejs"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"ignite/templates/component/NAME.tsx.ejs"})}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"testing",children:"Testing"}),"\n",(0,o.jsxs)(t.p,{children:["Now, all we need to do is run ",(0,o.jsx)(t.code,{children:"yarn test"}),"! If everything was set up properly, you should have a new suite of passing tests!"]})]})}function d(e={}){const{wrapper:t}={...(0,s.M)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},2172:(e,t,n)=>{n.d(t,{I:()=>a,M:()=>i});var o=n(1504);const s={},r=o.createContext(s);function i(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);